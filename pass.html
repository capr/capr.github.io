<html>
<head>
<style>
body, textarea, input, button, a {
	color: #ccc;
	background-color: #000;
	font-family: Fixedsys, monospace;
	font-size: 100%;
}
textarea, input, button {
	border: 1px solid #333;
	font-size: 100%;
}
</style>
<script src="jquery.js"></script>
<script src="triplesec.js"></script>
</head>
<body>
<input type="password" id="pass">
<input type="button" value="decrypt" id="decrypt">
<br>
<textarea rows="4" cols="100" id="text">
</textarea>
<br>
<textarea rows="50" cols="100" id="input_text"></textarea>
<br>
<input type="button" value="encrypt" id="encrypt">
<a href="https://gist.github.com/capr/faafcb47439cd6bde2ff/edit" target="_blank">go save it</a>
<br>
<script>

function encrypt() {
	triplesec.encrypt({
		data: new triplesec.Buffer($.trim($('#input_text').val())),
		key: new triplesec.Buffer($('#pass').val()),
	}, function(err, buff) {
			$('#text').val(err || buff.toString('hex'))
		}
	)
}

function decrypt() {
	triplesec.decrypt({
		data: new triplesec.Buffer($.trim($('#text').val()), 'hex'),
		key: new triplesec.Buffer($('#pass').val()),
	}, function(err, buff) {
			$('#input_text').val(err || buff.toString())
		}
	)
}

var gist_url =
	'https://gist.githubusercontent.com/capr/'+
	'faafcb47439cd6bde2ff/raw/'+
	'f8c90c03702c3c976d502c2445934a580dc06830/dump'

function load_gist() {
	$.get(gist_url, function(data) {
		$('#text').html(data)
	})
}

jQuery(function() {
	$('#encrypt').click(encrypt)
	$('#decrypt').click(decrypt)
	load_gist()
})

</script>
</body>
</html>
